id: projects
baseUrl: http://bioinfo.hpc.cam.ac.uk/opencga-demo/webservices/rest/v1/projects
# % of time allowed to deviate from expected time (0-100)
timeDeviation: 100
asyncRetryTime: 10
tests:
  - id: studies
    tags: QUICK
    path: /{projects}/studies
    method: GET
    async: false
    tasks:
      - id: positive
        pathParams:
          projects: exomes_grch37
#        queryParams:
#          limit: 5
#          include: id,name
#          sid:
#            file: /path/to/file.tsv
#            env: OPENCGA_TOKEN
        matrixParams:
          include:
            - id
            - name
          exclude:
            - creationDate
            - uri
          limit:
            - 1
            - 5
        validation:
          # seconds
          time: 0.05
          headers:
            Content-Type: application/json
          results:
            - list_length(response[0].results.events, 0, op?)
            - list_contains(response[], 'RCV1112233')
            - list_include(response[], ['RCV1112233'])
            - list_filter(response[], (item) => {item.type !== "ERROR"}))
            - list_equals(response[], [], order?)
            - list_sorted(response[0].sort, "ASC")
#            - dict_equals(response[0].results[0], {})
#            - starts_with # '^prot'
#            - contains    # regex?
#            - ends_with
            - regex(field, regex)
#            - equals(str, '')
            - compare(field, value, operator?)
            - exists
#            - empty(field)
            - not_empty
            - job_file_exists(field)
#            - check_no_error_in_event(response[0].results.events)

      - id: negative
        pathParams:
          projects: exomes_grch37
        queryParams:
          limit: 1
          skip: 1
        validation:
          time: 0.05
